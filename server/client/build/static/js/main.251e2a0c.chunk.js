(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{102:function(e,t,n){},112:function(e,t,n){},117:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),l=n(25),s=n.n(l),i=n(5),o=n(9),r=(n(67),n.p+"static/media/bp.7bb0c3d4.avif"),d=n(0);var j=()=>(console.log("Home component rendered"),Object(d.jsxs)("div",{className:"home",children:[Object(d.jsxs)("div",{className:"home-content",children:[Object(d.jsx)("h1",{children:"Bienvenue sur le site de la Banque Populaire"}),Object(d.jsx)("p",{children:"Ceci est la page d'accueil de notre application."}),Object(d.jsx)("p",{children:"Nous vous offrons les meilleurs services bancaires pour r\xe9pondre \xe0 vos besoins financiers."}),Object(d.jsx)("img",{src:r,alt:"Banque Populaire"})]}),Object(d.jsx)("div",{className:"footer",children:Object(d.jsx)("footer",{children:"\xa9 2024 Banque Populaire. Tous droits r\xe9serv\xe9s."})})]})),h=n(3);const b=Object(a.createContext)(),u=e=>{let{children:t}=e;const n=m();return Object(d.jsx)(b.Provider,{value:n,children:t})},p=()=>Object(a.useContext)(b),m=()=>{const[e,t]=Object(a.useState)(null),[n,c]=Object(a.useState)(!0),l=Object(o.g)();Object(a.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const n=JSON.parse(atob(e.split(".")[1])),a={email:n.user.email,role:n.user.role,fullName:n.user.fullName};t(a)}catch(n){console.error("Error decoding token:",n),localStorage.removeItem("token")}c(!1)}),[]);return{user:e,setUser:t,login:async(e,n)=>{try{const a=await fetch("http://localhost:5000/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n})});if(a.ok){const n=await a.json(),c=JSON.parse(atob(n.token.split(".")[1]));localStorage.setItem("token",n.token);const l={email:e,role:c.user.role,fullName:c.user.fullName};return t(l),l}{const e=await a.json();throw new Error(e.msg||"Login failed")}}catch(a){throw new Error("Server error: "+a.message)}},signup:async(e,n,a,l)=>{try{const s=await fetch("http://localhost:5000/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:e,email:n,password:a,role:l})});if(!s.ok){const e=await s.json();throw new Error(e.msg||"Signup failed")}{const e=await s.json(),a=JSON.parse(atob(e.token.split(".")[1]));localStorage.setItem("token",e.token),t({email:n,role:a.user.role,fullName:a.user.fullName}),c(!1)}}catch(s){throw c(!1),new Error("Server error: "+s.message)}},logout:()=>{localStorage.removeItem("token"),t(null),l.push("/login")},loading:n}};var O,x,g,f,v,N,S,y,k,w,C,E,_,P,A,F,T=n.p+"static/media/loginpageimage.38fb181b.jpg",q=n(10),M=n(4);const D=M.a.div(O||(O=Object(h.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  text-align: center;\n  overflow: hidden;\n  margin: -10px;\n  flex: 1;\n"]))),I=M.a.div(x||(x=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: url(",") no-repeat center center fixed;\n  background-size: cover;\n  filter: blur(4px);\n  z-index: -1;\n"])),T),R=M.a.h2(g||(g=Object(h.a)(["\n  color: #333;\n  margin-bottom: 20px;\n  font-weight: bold;\n  font-size: 50px;\n"]))),B=M.a.form(f||(f=Object(h.a)(["\n  background: rgba(255, 255, 255, 0.9);\n  padding: 70px 50px;\n  border-radius: 10px;\n  box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);\n  text-align: left;\n  width: 100%;\n  max-width: 450px;\n  z-index: 1;\n  position: relative;\n"]))),z=M.a.div(v||(v=Object(h.a)(["\n  margin-bottom: 30px;\n"]))),L=M.a.label(N||(N=Object(h.a)(["\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #555;\n  font-size: 14px;\n"]))),H=M.a.input(S||(S=Object(h.a)(["\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  font-size: 16px;\n  box-sizing: border-box;\n"]))),V=M.a.div(y||(y=Object(h.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n"]))),G=M.a.div(k||(k=Object(h.a)(["\n  position: absolute;\n  right: 10px;\n  cursor: pointer;\n  margin-top: 13px;\n  font-size: 16px;\n"]))),X=M.a.button(w||(w=Object(h.a)(["\n  width: 100%;\n  padding: 10px;\n  border: none;\n  border-radius: 5px;\n  background-color: ",";\n  color: white;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 10px;\n"])),(e=>e.isHovering?"black":"#ef6108")),Y=M.a.div(C||(C=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 15px;\n"]))),U=Object(M.a)(i.b)(E||(E=Object(h.a)(["\n  color: #ef6108;\n  text-decoration: none;\n  font-size: 14px;\n"]))),J=M.a.footer(_||(_=Object(h.a)(["\n  margin-top: 20px;\n  font-size: 14px;\n  color: #777;\n  font-weight: bold;\n  position: absolute;\n  bottom: 20px;\n  width: 100%;\n  text-align: center;\n  align-items: center;\n"]))),W=M.a.p(P||(P=Object(h.a)(["\n  color: red;\n  font-style: italic;\n  font-weight: bold;\n"]))),K=Object(M.b)(A||(A=Object(h.a)(["\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n"]))),Q=Object(M.a)(q.g)(F||(F=Object(h.a)(["\n  margin-left: 10px;\n  animation: "," 1s linear infinite;\n"])),K);var Z,$,ee,te,ne,ae,ce,le,se,ie,oe,re,de,je=()=>{const{login:e}=p(),t=Object(o.g)(),[n,c]=Object(a.useState)(""),[l,s]=Object(a.useState)(""),[i,r]=Object(a.useState)(!1),[j,h]=Object(a.useState)(""),[b,u]=Object(a.useState)(!1),[m,O]=Object(a.useState)(!1),[x,g]=Object(a.useState)(!1);Object(a.useEffect)((()=>{const e=localStorage.getItem("rememberMeEmail");localStorage.getItem("rememberMePassword");e&&(c(e),O(!0))}),[]);return Object(d.jsxs)(D,{children:[Object(d.jsx)(I,{}),Object(d.jsx)(R,{children:"Login"}),j&&Object(d.jsxs)(W,{children:[j," ",x&&Object(d.jsx)(Q,{})]}),Object(d.jsxs)(B,{onSubmit:async a=>{a.preventDefault(),g(!0);try{const a=await e(n,l);h("Login successful! Redirecting to dashboard..."),m?localStorage.setItem("rememberMeEmail",n):localStorage.removeItem("rememberMeEmail"),setTimeout((()=>{switch(g(!1),a.role){case"admin":case"consultant":t.push("/dashboard");break;default:t.push("/edit-excel")}}),2e3)}catch(c){g(!1),h("Login failed: "+c.message)}},children:[Object(d.jsxs)(z,{children:[Object(d.jsx)(L,{children:"Email"}),Object(d.jsx)(H,{type:"email",value:n,onChange:e=>c(e.target.value),required:!0})]}),Object(d.jsxs)(z,{children:[Object(d.jsx)(L,{children:"Password"}),Object(d.jsxs)(V,{children:[Object(d.jsx)(H,{type:i?"text":"password",value:l,onChange:e=>s(e.target.value),required:!0}),Object(d.jsx)(G,{onClick:()=>r(!i),children:i?Object(d.jsx)(q.b,{}):Object(d.jsx)(q.a,{})})]})]}),Object(d.jsxs)(Y,{children:[Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",checked:m,onChange:e=>O(e.target.checked)})," Remember me"]}),Object(d.jsx)(U,{to:"/forgot-password",onClick:()=>console.log("Forgot Password link clicked"),children:"Forgot password?"})]}),Object(d.jsx)(X,{type:"submit",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),isHovering:b,children:"Login"}),Object(d.jsxs)(J,{children:["Not a member? ",Object(d.jsx)(U,{to:"/signup",children:"Signup Now"})]})]})]})};const he=M.a.div(Z||(Z=Object(h.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  text-align: center;\n  overflow: hidden;\n  margin: -10px;\n  flex: 1;\n"]))),be=M.a.div($||($=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: url(",") no-repeat center center fixed;\n  background-size: cover;\n  filter: blur(4px);\n  z-index: -1;\n"])),T),ue=M.a.h2(ee||(ee=Object(h.a)(["\n  color: #333;\n  margin-bottom: 20px;\n  font-weight: bold;\n  font-size: 50px;\n"]))),pe=M.a.form(te||(te=Object(h.a)(["\n  background: rgba(255, 255, 255, 0.9);\n  padding: 50px 50px;\n  border-radius: 10px;\n  box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);\n  text-align: left;\n  width: 100%;\n  max-width: 450px;\n  z-index: 1;\n  position: relative;\n"]))),me=M.a.div(ne||(ne=Object(h.a)(["\n  margin-bottom: 30px;\n"]))),Oe=M.a.label(ae||(ae=Object(h.a)(["\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n  color: #555;\n    font-size: 14px;\n"]))),xe=M.a.input(ce||(ce=Object(h.a)(["\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  font-size: 16px;\n  box-sizing: border-box;\n  margin-bottom: 20px;\n"]))),ge=M.a.div(le||(le=Object(h.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n"]))),fe=M.a.div(se||(se=Object(h.a)(["\n  position: absolute;\n  right: 10px;\n  cursor: pointer;\n  margin-top: -6px;\n  font-size: 16px;\n"]))),ve=M.a.button(ie||(ie=Object(h.a)(["\n  width: 100%;\n  padding: 10px;\n  border: none;\n  border-radius: 5px;\n  background-color: ",";\n  color: white;\n  font-size: 16px;\n  cursor: pointer;\n  margin-top: 10px;\n"])),(e=>e.isHovering?"black":"#ef6108")),Ne=M.a.a(oe||(oe=Object(h.a)(["\n  color: #ef6108;\n  text-decoration: none;\n  font-size: 14px;\n"]))),Se=M.a.footer(re||(re=Object(h.a)(["\n  margin-top: 10px;\n  font-size: 14px;\n  color: #777;\n  font-weight: bold;\n  position: absolute;\n  bottom: 10px;\n  width: calc(100% - 100px);\n  text-align: center;\n"]))),ye=M.a.p(de||(de=Object(h.a)(["\n  color: red;\n  font-style: italic;\n"])));var ke=()=>{const{signup:e}=p(),t=Object(o.g)(),[n,c]=Object(a.useState)(""),[l,s]=Object(a.useState)(""),[i,r]=Object(a.useState)(""),[j,h]=Object(a.useState)(!1),[b,u]=Object(a.useState)(""),[m,O]=Object(a.useState)(!1);return Object(d.jsxs)(he,{children:[Object(d.jsx)(be,{}),Object(d.jsx)(ue,{children:"Signup"}),b&&Object(d.jsx)(ye,{children:b}),Object(d.jsxs)(pe,{onSubmit:async a=>{if(a.preventDefault(),i.length<6)u("Password must be at least 6 characters long");else try{await e(n,l,i),u("Signup successful! Redirecting to login..."),setTimeout((()=>{t.push("/login")}),2e3)}catch(c){const e=c.response&&c.response.data?c.response.data.msg:c.message;u("Signup failed: "+e)}},children:[Object(d.jsxs)(me,{children:[Object(d.jsx)(Oe,{children:"Full Name"}),Object(d.jsx)(xe,{type:"text",value:n,onChange:e=>c(e.target.value),required:!0})]}),Object(d.jsxs)(me,{children:[Object(d.jsx)(Oe,{children:"Email"}),Object(d.jsx)(xe,{type:"email",value:l,onChange:e=>s(e.target.value),required:!0})]}),Object(d.jsxs)(me,{children:[Object(d.jsx)(Oe,{children:"Password"}),Object(d.jsxs)(ge,{children:[Object(d.jsx)(xe,{type:j?"text":"password",value:i,onChange:e=>r(e.target.value),required:!0}),Object(d.jsx)(fe,{onClick:()=>h(!j),children:j?Object(d.jsx)(q.b,{}):Object(d.jsx)(q.a,{})})]})]}),Object(d.jsx)(ve,{type:"submit",onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),isHovering:m,children:"Signup"}),Object(d.jsxs)(Se,{children:["Already a member? ",Object(d.jsx)(Ne,{href:"/login",children:"Login Now"})]})]})]})},we=n(6),Ce=n.n(we),Ee=n(35),_e=n.n(Ee);n(94);var Pe=()=>{const{user:e,loading:t}=p(),n=Object(o.g)(),[c,l]=Object(a.useState)([]),[s,i]=Object(a.useState)([]),[r,j]=Object(a.useState)([]),[h,b]=Object(a.useState)([]);if(Object(a.useEffect)((()=>{if(!t){localStorage.getItem("token")||n.push("/login")}}),[t,n]),Object(a.useEffect)((()=>{e&&((async()=>{try{const e=await fetch("http://localhost:5000/api/users/admin/user-history",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();console.log("Fetched User History:",t),l(t)}else console.error("Failed to fetch user history")}catch(e){console.error("Error fetching user history:",e)}})(),(async()=>{try{const e=await fetch("http://localhost:5000/api/it-equipments/admin/it-equipment-modifications",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=(await e.json()).filter((e=>"createdAt"!==e.field&&"updatedAt"!==e.field));i(t)}else console.error("Failed to fetch modification history")}catch(e){console.error("Error fetching modification history:",e)}})(),(async()=>{try{const e=await fetch("http://localhost:5000/api/telecom-packs/admin/telecom-pack-modifications",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();console.log("Fetched Telecom Modifications:",t),j(t)}else console.error("Failed to fetch telecom modification history")}catch(e){console.error("Error fetching telecom modification history:",e)}})(),(async()=>{try{console.log("Fetching Telephone Line modification history...");const e=await fetch("http://localhost:5000/api/telephone-lines/admin/telephone-line-modifications",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();console.log("Fetched Telephone Line Modifications:",t),0===t.length?console.log("No modification records found"):t.forEach((e=>{console.log("Modification Record:",JSON.stringify(e,null,2))})),b(t)}else console.error("Failed to fetch telephone line modification history, status:",e.status)}catch(e){console.error("Error fetching telephone line modification history:",e)}})())}),[e]),t)return Object(d.jsx)("div",{children:"Loading..."});if(!e)return null;const u=async e=>{if((await _e.a.fire({title:"\xcates-vous s\xfbr de vouloir supprimer la table ".concat(e,"?"),text:"Cette action ne peut pas \xeatre annul\xe9e.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, supprimez-la !"})).isConfirmed)try{let t="";"it-equipments"===e?t="http://localhost:5000/api/it-equipments/admin/drop-it-equipments-table":"telecom-pack"===e?t="http://localhost:5000/api/telecom-packs/admin/drop-telecom-packs-table":"telephone-lines"===e&&(t="http://localhost:5000/api/telephone-lines/admin/drop-telephone-lines-table"),console.log("Request URL: ".concat(t));const n=await Ce.a.delete(t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Response:",n),204===n.status?_e.a.fire("Supprim\xe9e !","La table ".concat(e," a \xe9t\xe9 supprim\xe9e."),"success"):console.error("\xc9chec de la suppression de la table ".concat(e," : ").concat(n.statusText))}catch(t){console.error("Erreur lors de la suppression de la table ".concat(e," :"),t.message),_e.a.fire("Error!","Erreur lors de la suppression de la table ".concat(e," : ").concat(t.message),"error")}},m=e=>{if(!e)return"N/A";const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString()};return Object(d.jsx)("div",{className:"admin-dashboard",children:Object(d.jsxs)("div",{className:"admin-dashboard-content",children:[Object(d.jsx)("h1",{className:"admin-dashboard-title",children:"Admin Dashboard"}),Object(d.jsxs)("div",{className:"admin-user-history-section",children:[Object(d.jsx)("h2",{children:"Historique de connexion utilisateur"}),c.length>0?Object(d.jsx)("div",{className:"admin-table-container",children:Object(d.jsxs)("table",{className:"admin-table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Email"}),Object(d.jsx)("th",{children:"Nom et Pr\xe9nom"}),Object(d.jsx)("th",{children:"Derni\xe8re connexion"})]})}),Object(d.jsx)("tbody",{children:c.map(((e,t)=>Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.email}),Object(d.jsx)("td",{children:e.fullName}),Object(d.jsx)("td",{children:m(e.lastLogin)})]},t)))})]})}):Object(d.jsx)("p",{children:"Aucun historique de connexion utilisateur disponible."})]}),Object(d.jsxs)("div",{className:"admin-modification-history-section",children:[Object(d.jsx)("h2",{children:"Historique des modifications de Mat\xe9riel informatique"}),Object(d.jsx)("button",{onClick:async()=>{try{(await fetch("http://localhost:5000/api/it-equipments/admin/it-equipment-modifications",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok?(i([]),console.log("Modification history reset successfully")):console.error("Failed to reset modification history")}catch(e){console.error("Error resetting modification history:",e)}},className:"reset-button",children:"R\xe9initialiser"}),"admin"===e.role&&Object(d.jsx)("button",{onClick:()=>u("it-equipments"),className:"drop-button",children:"Supprimer la table"}),s.length>0?Object(d.jsx)("div",{className:"admin-table-container",children:Object(d.jsxs)("table",{className:"admin-table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Utilisateur"}),Object(d.jsx)("th",{children:"Email"}),Object(d.jsx)("th",{children:"Temps de Modification"}),Object(d.jsx)("th",{children:"Champ"}),Object(d.jsx)("th",{children:"Ancienne Valeur"}),Object(d.jsx)("th",{children:"Nouvelle valeur"})]})}),Object(d.jsx)("tbody",{children:s.map(((e,t)=>Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.User.fullName}),Object(d.jsx)("td",{children:e.User.email}),Object(d.jsx)("td",{children:m(e.modifiedAt)}),Object(d.jsx)("td",{children:e.field}),Object(d.jsx)("td",{children:e.oldValue}),Object(d.jsx)("td",{children:e.newValue})]},t)))})]})}):Object(d.jsx)("p",{children:"Aucun historique de modification de Mat\xe9riel Informatique disponible."})]}),Object(d.jsxs)("div",{className:"admin-modification-history-section",children:[Object(d.jsx)("h2",{children:"Historique des modifications du Parc T\xe9l\xe9com"}),Object(d.jsx)("button",{onClick:async()=>{try{(await fetch("http://localhost:5000/api/telecom-packs/admin/telecom-pack-modifications",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok?(j([]),console.log("Telecom Pack modification history reset successfully")):console.error("Failed to reset Telecom Pack modification history")}catch(e){console.error("Error resetting Telecom Pack modification history:",e)}},className:"reset-button",children:"R\xe9initialiser"}),"admin"===e.role&&Object(d.jsx)("button",{onClick:()=>u("telecom-pack"),className:"drop-button",children:"Supprimer la table"}),r.length>0?Object(d.jsx)("div",{className:"admin-table-container",children:Object(d.jsxs)("table",{className:"admin-table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Utilisateur"}),Object(d.jsx)("th",{children:"Email"}),Object(d.jsx)("th",{children:"Temps de Modification"}),Object(d.jsx)("th",{children:"Champ"}),Object(d.jsx)("th",{children:"Ancienne Valeur"}),Object(d.jsx)("th",{children:"Nouvelle valeur"})]})}),Object(d.jsx)("tbody",{children:r.map(((e,t)=>Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.User.fullName}),Object(d.jsx)("td",{children:e.User.email}),Object(d.jsx)("td",{children:m(e.modifiedAt)}),Object(d.jsx)("td",{children:e.field}),Object(d.jsx)("td",{children:e.oldValue?e.oldValue:"N/A"}),Object(d.jsx)("td",{children:e.newValue?e.newValue:"N/A"})]},t)))})]})}):Object(d.jsx)("p",{children:"Aucun historique de modification du Parc T\xe9l\xe9com disponible."})]}),Object(d.jsxs)("div",{className:"admin-modification-history-section",children:[Object(d.jsx)("h2",{children:"Historique des modifications des Lignes T\xe9l\xe9phoniques"}),Object(d.jsx)("button",{onClick:async()=>{try{(await fetch("http://localhost:5000/api/telephone-lines/admin/telephone-line-modifications",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok?(b([]),console.log("Telephone Line modification history reset successfully")):console.error("Failed to reset Telephone Line modification history")}catch(e){console.error("Error resetting Telephone Line modification history:",e)}},className:"reset-button",children:"R\xe9initialiser"}),"admin"===e.role&&Object(d.jsx)("button",{onClick:()=>u("telephone-lines"),className:"drop-button",children:"Supprimer la table"}),h.length>0?Object(d.jsx)("div",{className:"admin-table-container",children:Object(d.jsxs)("table",{className:"admin-table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Utilisateur"}),Object(d.jsx)("th",{children:"Email"}),Object(d.jsx)("th",{children:"Temps de Modification"}),Object(d.jsx)("th",{children:"Champ"}),Object(d.jsx)("th",{children:"Ancienne Valeur"}),Object(d.jsx)("th",{children:"Nouvelle valeur"})]})}),Object(d.jsx)("tbody",{children:h.map(((e,t)=>Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.User.fullName}),Object(d.jsx)("td",{children:e.User.email}),Object(d.jsx)("td",{children:m(e.modifiedAt)}),Object(d.jsx)("td",{children:e.field}),Object(d.jsx)("td",{children:e.oldValue?e.oldValue:"N/A"}),Object(d.jsx)("td",{children:e.newValue?e.newValue:"N/A"})]},t)))})]})}):Object(d.jsx)("p",{children:"Aucun historique de modification de Ligne T\xe9l\xe9phonique disponible."})]})]})})};n(95);var Ae=()=>{const{user:e}=p(),t=Object(o.g)(),n=e=>{t.push(e)};return e?Object(d.jsxs)("div",{className:"dashboard",children:[Object(d.jsxs)("aside",{className:"sidebar",children:[Object(d.jsx)("div",{className:"sidebar-item",onClick:()=>n("/dashboard"),children:"Dashboard"}),Object(d.jsx)("div",{className:"sidebar-item",onClick:()=>n("/telecom-packs"),children:"Telecom Packs"}),Object(d.jsx)("div",{className:"sidebar-item",onClick:()=>n("/telephone-lines"),children:"Telephone Lines"}),Object(d.jsx)("div",{className:"sidebar-item",onClick:()=>n("/it-equipments"),children:"IT Equipments"})]}),Object(d.jsxs)("div",{className:"dashboard-content",children:[Object(d.jsx)("h1",{children:"Consultant Dashboard"}),Object(d.jsxs)("p",{children:["Welcome, ",e.fullName,"!"]}),Object(d.jsxs)("div",{className:"profile-section",children:[Object(d.jsx)("h2",{children:"Your Profile"}),Object(d.jsxs)("p",{children:[Object(d.jsx)("strong",{children:"Email:"})," ",e.email]})]})]})]}):Object(d.jsx)(o.a,{to:"/login"})},Fe=n.p+"static/media/logo.f09c1534.png";n(96);var Te=()=>{const{user:e}=p(),t=!!e;return Object(d.jsxs)("nav",{className:"navbar",children:[Object(d.jsx)("img",{src:Fe,alt:"App Logo",className:"logo"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:"/",className:"nav-link",children:"Home"})}),t?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:"/dashboard",className:"nav-link",children:"Dashboard"})})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{to:"/signup",className:"nav-link",children:"Signup"})})]})]}),t&&Object(d.jsxs)("div",{className:"user-info",children:[Object(d.jsx)("span",{className:"user-icon",children:"\ud83d\udc64"}),e.fullName]})]})};n(97);var qe=()=>{const[e,t]=Object(a.useState)(!1),{user:n,logout:c}=p();return Object(d.jsxs)("div",{className:"sidebar-container ".concat(e?"active":"minimized"),children:[Object(d.jsx)("button",{className:"sidebar-toggle",onClick:()=>{t(!e)},children:"\u2630"}),Object(d.jsxs)("div",{className:"sidebar ".concat(e?"active":"minimized"),children:[Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{children:[n&&"admin"===n.role&&Object(d.jsx)("li",{children:Object(d.jsxs)(i.c,{to:"/dashboard",activeClassName:"active",children:[Object(d.jsx)("span",{className:"icon",children:"\ud83c\udfe0"}),Object(d.jsx)("span",{className:"text",children:"Dashboard"})]})}),Object(d.jsx)("li",{children:Object(d.jsxs)(i.c,{to:"/telecom-packs",activeClassName:"active",children:[Object(d.jsx)("span",{className:"icon",children:"\ud83d\udce6"}),Object(d.jsx)("span",{className:"text",children:"Parc Telecom"})]})}),Object(d.jsx)("li",{children:Object(d.jsxs)(i.c,{to:"/telephone-lines",activeClassName:"active",children:[Object(d.jsx)("span",{className:"icon",children:"\ud83d\udcde"}),Object(d.jsx)("span",{className:"text",children:"Ligne T\xe9l\xe9phonique"})]})}),Object(d.jsx)("li",{children:Object(d.jsxs)(i.c,{to:"/it-equipment",activeClassName:"active",children:[Object(d.jsx)("span",{className:"icon",children:"\ud83d\udcbb"}),Object(d.jsx)("span",{className:"text",children:"Mat\xe9riel informatique"})]})}),Object(d.jsx)("li",{children:Object(d.jsxs)(i.c,{to:"/edit-excel",activeClassName:"active",children:[Object(d.jsx)("span",{className:"icon",children:"\ud83d\udcc2"}),Object(d.jsx)("span",{className:"text",children:"Importer Excel"})]})})]})}),Object(d.jsx)("div",{className:"logout-container",children:Object(d.jsxs)("button",{onClick:()=>{c()},className:"logout-button",children:[Object(d.jsx)("span",{className:"icon",children:"\ud83d\udd12"}),Object(d.jsx)("span",{className:"text",children:"Logout"})]})})]})]})},Me=n(11),De=n(62);n(102);const Ie=Object(De.a)("http://localhost:5000");var Re=()=>{const[e,t]=Object(a.useState)(null),[n,c]=Object(a.useState)(""),[l,s]=Object(a.useState)([]),[i,o]=Object(a.useState)(""),[r,j]=Object(a.useState)(0),[h,b]=Object(a.useState)(0);Object(a.useEffect)((()=>{if(n){(async()=>{try{const e=await Ce.a.get("http://localhost:5000/api/schema/".concat(n),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});s(e.data)}catch(e){o("Erreur lors de la r\xe9cup\xe9ration du sch\xe9ma"),console.error("Error fetching schema:",e)}})()}}),[n]),Object(a.useEffect)((()=>(Ie.on("uploadProgress",(e=>{let{uploadId:t,progress:n}=e;b(n)})),()=>{Ie.off("uploadProgress")})),[]);return Object(a.useEffect)((()=>{if(e){const t=new FileReader;t.onload=e=>{const t=Me.a(e.target.result,{type:"binary"}),n=t.SheetNames[0],a=(e=>0===l.length?e:e.map((e=>Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return l.includes(t)}))))))(Me.b.sheet_to_json(t.Sheets[n]));j((e=>0===l.length||0===e.length?0:l.filter((t=>Object.keys(e[0]).includes(t))).length)(a))},t.readAsBinaryString(e)}}),[e,l]),Object(d.jsxs)("div",{className:"excel-editor",children:[Object(d.jsx)("h2",{children:"T\xe9l\xe9chargement de fichier Excel"}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"S\xe9lectionnez le fichier Excel"}),Object(d.jsxs)("div",{className:"file-upload",children:[Object(d.jsx)("input",{type:"file",onChange:e=>{t(e.target.files[0])}}),Object(d.jsx)("div",{className:"file-upload-text",children:e?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(q.c,{className:"file-icon"}),e.name]}):Object(d.jsxs)(d.Fragment,{children:["D\xe9posez vos fichiers ici ou ",Object(d.jsx)("span",{className:"browse-files",children:"Parcourir les fichiers"})]})}),Object(d.jsx)("div",{className:"file-type-text",children:"Types de fichiers accept\xe9s : .xlsx"})]})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"S\xe9lectionnez un tableau"}),Object(d.jsxs)("select",{value:n,onChange:e=>c(e.target.value),children:[Object(d.jsx)("option",{value:"",children:"S\xe9lectionnez un tableau"}),Object(d.jsx)("option",{value:"it_equipments",children:"\xc9quipements informatiques"}),Object(d.jsx)("option",{value:"telecom_pack",children:"Parc T\xe9l\xe9com"}),Object(d.jsx)("option",{value:"telephone_lines",children:"Lignes t\xe9l\xe9phoniques"})]})]}),Object(d.jsx)("button",{onClick:async()=>{try{if(!e||!n)return void alert("Veuillez s\xe9lectionner un tableau et un fichier.");const t=new FormData;t.append("file",e);const a=await Ce.a.post("http://localhost:5000/api/upload/".concat(n),t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("File uploaded successfully:",a.data),o("Fichier t\xe9l\xe9charg\xe9 avec succ\xe8s")}catch(t){console.error("Error uploading file:",t),alert("Erreur lors du t\xe9l\xe9chargement du fichier: "+t.message),o("Erreur lors du t\xe9l\xe9chargement du fichier: "+t.message)}},children:"T\xe9l\xe9charger"}),Object(d.jsxs)("div",{className:"progress-container",children:[Object(d.jsx)("div",{className:"progress",children:Object(d.jsx)("div",{className:"bar",style:{width:"".concat(h,"%")},children:Object(d.jsxs)("p",{className:"counter",children:[h,"%"]})})}),100===h&&Object(d.jsxs)("div",{className:"success-container",children:[Object(d.jsx)("p",{className:"success",children:"T\xe9l\xe9chargement termin\xe9!"}),Object(d.jsx)("p",{className:"success-message",children:"Fichier t\xe9l\xe9charg\xe9 avec succ\xe8s"})]})]}),i&&Object(d.jsx)("p",{children:i}),l.length>0&&Object(d.jsxs)("div",{className:"schema-container",children:[Object(d.jsx)("h3",{children:"Sch\xe9ma du tableau"}),Object(d.jsxs)("p",{children:["Nombre de colonnes correspondantes : ",r]}),Object(d.jsx)("div",{className:"schema-table",children:l.map((e=>Object(d.jsxs)("div",{className:"schema-column",children:[e,Object(d.jsxs)("div",{className:"placeholder",children:["numero_de_gsm"===e&&"Ex: 212XXXXXXXXX",e.includes("date")&&"Format: yyyy-mm-dd ou mm/dd/yyyy"]})]},e)))})]})]})},Be=n(24),ze=n.n(Be);n(112);ze.a.setAppElement("#root");var Le=()=>{const e=Object(o.g)(),{user:t}=p(),[n,c]=Object(a.useState)(!1),l=()=>{c(!1)};return Object(d.jsxs)("div",{className:"landing-container",children:[Object(d.jsx)("div",{className:"card view-card",onClick:()=>e.push("/it-equipment-view"),children:Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsx)("h3",{children:"Afficher IT Equipments"}),Object(d.jsxs)("p",{children:["\u29bfVoir tableau ",Object(d.jsx)("br",{}),"\u29bfExporter Excel"]})]})}),Object(d.jsx)("div",{className:"card modify-card",onClick:()=>{t&&"admin"===t.role?e.push("/it-equipment-manager"):c(!0)},children:Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsx)("h3",{children:"Modifier IT Equipments"}),Object(d.jsx)("p",{children:"\u29bfPlus d'infos"})]})}),Object(d.jsxs)(ze.a,{isOpen:n,onRequestClose:l,contentLabel:"Access Denied",className:"modal",overlayClassName:"overlay",children:[Object(d.jsx)("h2",{children:"Access Denied"}),Object(d.jsx)("p",{children:"You do not have permission to modify this page."}),Object(d.jsx)("button",{onClick:l,children:"Close"})]})]})},He=n(7),Ve=n(20),Ge=n(36);n(116),n(117);const Xe=e=>{let{column:{filterValue:t=[],setFilter:n,id:c},uniqueValues:l,globalSetFilters:s,originalData:i,setITEquipments:o,applyFilters:r}=e;const[j,h]=Object(a.useState)((()=>t.map((e=>({value:e,label:e})))));return Object(d.jsx)("div",{className:"itequipment-view-filter-container",children:Object(d.jsx)(Ve.a,{value:j,onChange:e=>{const t=e?e.map((e=>e.value)):[];h(e),n(t.length?t:void 0),s((e=>{const n={...e,[c]:t};return o(r(i,n)),n}))},options:l,isMulti:!0,placeholder:"Filter by...",className:"itequipment-view-filter-select"})})};var Ye=()=>{const[e,t]=Object(a.useState)([]),[n,c]=Object(a.useState)([]),[l,s]=Object(a.useState)([]),[i,r]=Object(a.useState)({}),[j,h]=Object(a.useState)({}),b=Object(o.g)();Object(a.useEffect)((()=>{p()}),[]);const u=(e,t)=>e.filter((e=>Object.keys(t).every((n=>!t[n].length||t[n].includes(e[n]))))),p=async()=>{try{const e=await Ce.a.get("http://localhost:5000/api/it-equipments",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.data&&Array.isArray(e.data.equipments)){const n=e.data.equipments.map((e=>{let{createdAt:t,updatedAt:n,id:a,...c}=e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"------",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a={...e};for(let c in a)""!==a[c]&&null!==a[c]||(["date_installation","fin_garantie","date_achat","date_livraison","date_sortie"].includes(c)?a[c]=null:a[c]="prix_achat"===c?n:t);return a}(c)}));c(n);const a=Object.keys(n[0]||{}),l={};a.forEach((e=>{l[e]=[...new Set(n.map((t=>t[e])))].map((e=>({value:e,label:e})))}));const i=[{Header:"#",accessor:(e,t)=>t+1,disableFilters:!0,disableSortBy:!0,width:50},...a.map((e=>({Header:e.replace(/_/g," "),accessor:e,Filter:a=>Object(d.jsx)(Xe,{...a,uniqueValues:l[e],globalSetFilters:h,originalData:n,setITEquipments:t,applyFilters:u})})))];s(i),r(l),t(u(n,j))}else Ge.b.error("Error fetching IT equipments")}catch(e){Ge.b.error("Error fetching IT equipments: "+e.message)}};Object(a.useEffect)((()=>{n.length&&t(u(n,j))}),[j,n]);const m=e=>{let{columns:t,data:n}=e;const{getTableProps:a,getTableBodyProps:c,headerGroups:l,prepareRow:s,page:i,canPreviousPage:o,canNextPage:r,pageOptions:j,state:{pageIndex:h,pageSize:b},gotoPage:u,nextPage:p,previousPage:m,setPageSize:O}=Object(He.useTable)({columns:t,data:n,defaultColumn:{minWidth:30,width:150,maxWidth:400},initialState:{pageIndex:0}},He.useFilters,He.useSortBy,He.usePagination);return Object(d.jsxs)("div",{className:"itequipment-view-table-container",children:[Object(d.jsxs)("table",{...a(),className:"itequipment-view-data-table",children:[Object(d.jsx)("thead",{children:l.map((e=>Object(d.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(d.jsx)("th",{...e.getHeaderProps(e.getSortByToggleProps()),children:Object(d.jsxs)("div",{style:{width:e.width},children:[e.render("Header"),Object(d.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(d.jsx)(q.e,{}):Object(d.jsx)(q.f,{}):Object(d.jsx)(q.d,{})}),Object(d.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]})})))})))}),Object(d.jsx)("tbody",{...c(),children:i.map(((e,t)=>(s(e),Object(d.jsx)("tr",{...e.getRowProps(),className:t%2===0?"itequipment-view-row-even":"itequipment-view-row-odd",children:e.cells.map((e=>Object(d.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]}),Object(d.jsxs)("div",{className:"pagination-controls",children:[Object(d.jsx)("button",{onClick:()=>u(0),disabled:!o,children:"<<"}),Object(d.jsx)("button",{onClick:()=>m(),disabled:!o,children:"Pr\xe9c\xe9dent"}),Object(d.jsxs)("span",{children:["Page"," ",Object(d.jsxs)("strong",{children:[h+1," of ",j.length]})," "]}),Object(d.jsx)("button",{onClick:()=>p(),disabled:!r,children:"Suivant"}),Object(d.jsx)("button",{onClick:()=>u(j.length-1),disabled:!r,children:">>"}),Object(d.jsx)("select",{value:b,onChange:e=>{O(Number(e.target.value))},children:[10,25,50,100].map((e=>Object(d.jsxs)("option",{value:e,children:["Show ",e]},e)))})]})]})};return Object(d.jsxs)("div",{className:"itequipment-view-container",children:[Object(d.jsx)(Ge.a,{}),Object(d.jsx)("button",{className:"itequipment-view-back-button",onClick:()=>b.push("/it-equipment"),children:"\u21a9"}),Object(d.jsx)("h1",{className:"itequipment-view-title",children:"Afficher IT Equipments"}),Object(d.jsxs)("div",{className:"itequipment-view-selected-filters-container",children:[Object(d.jsx)("h3",{children:"Filtres S\xe9lectionn\xe9s:"}),Object.keys(j).map((e=>j[e].map(((t,n)=>Object(d.jsxs)("span",{className:"itequipment-view-filter-chip",children:["".concat(e,": ").concat(t)," ",Object(d.jsx)("button",{onClick:()=>((e,t)=>{h((n=>{const a={...n};return a[e]=a[e].filter((e=>e!==t)),0===a[e].length&&delete a[e],a}))})(e,t),children:"x"})]},"".concat(e,"-").concat(n))))))]}),Object(d.jsx)("div",{className:"itequipment-view-filters-container",children:l.map((e=>e.canFilter?Object(d.jsxs)("div",{className:"itequipment-view-filter",children:[Object(d.jsx)("label",{children:e.render("Header")}),e.render("Filter")]},e.id):null))}),l.length>0&&Object(d.jsx)(m,{columns:l,data:e}),Object(d.jsx)("div",{className:"itequipment-view-footer",children:Object(d.jsx)("button",{className:"itequipment-view-export-button",onClick:()=>(e=>{const t=Me.b.json_to_sheet(e),n=Me.b.book_new();Me.b.book_append_sheet(n,t,"ITEquipments"),Me.c(n,"ITEquipments.xlsx")})(e),children:"Export to Excel"})})]})};n(141);const Ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"------";return Object.fromEntries(Object.entries(e).map((e=>{let[n,a]=e;return""===a||null===a?["date_installation","fin_garantie","date_achat","date_livraison","date_sortie"].includes(n)?[n,null]:[n,t]:[n,a]})))},Je=e=>{if(!e||"------"===e)return"";return new Date(e).toISOString().split("T")[0]},We=e=>{let{columns:t,data:n}=e;const{getTableProps:a,getTableBodyProps:c,headerGroups:l,rows:s,prepareRow:i}=Object(He.useTable)({columns:t,data:n},He.useFilters,He.useSortBy);return Object(d.jsxs)("table",{...a(),className:"data-table itequipment-view-data-table",children:[Object(d.jsx)("thead",{children:l.map((e=>Object(d.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(d.jsx)("th",{...e.getHeaderProps(e.getSortByToggleProps()),children:Object(d.jsxs)("div",{children:[e.render("Header"),Object(d.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""}),Object(d.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]})})))})))}),Object(d.jsx)("tbody",{...c(),children:s.map(((e,t)=>(i(e),Object(d.jsx)("tr",{...e.getRowProps(),className:t%2===0?"itequipment-view-row-even":"itequipment-view-row-odd",children:e.cells.map((e=>Object(d.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]})},Ke=e=>{let{name:t,value:n,options:c,onChange:l,placeholder:s}=e;const[i,o]=Object(a.useState)(!1),[r,j]=Object(a.useState)(n),h=c.filter((e=>e.label.toLowerCase().includes(r.toLowerCase())));return Object(d.jsxs)("div",{className:"dropdown-container",children:[Object(d.jsx)("input",{type:"text",name:t,value:r,onChange:e=>{j(e.target.value),l({target:{name:t,value:e.target.value}}),o(!0)},placeholder:s,onClick:()=>o(!i)}),Object(d.jsx)("div",{className:"dropdown-arrow",onClick:()=>o(!i),children:"\u25bc"}),i&&Object(d.jsx)("div",{className:"dropdown-menu",children:0===h.length?Object(d.jsx)("div",{className:"dropdown-option",children:"No options available"}):h.map(((e,n)=>Object(d.jsx)("div",{className:"dropdown-option",onClick:()=>(e=>{j(e.label),l({target:{name:t,value:e.value}}),o(!1)})(e),children:e.label},n)))})]})};var Qe=()=>{const[e,t]=Object(a.useState)([]),[n,l]=Object(a.useState)({}),[s,i]=Object(a.useState)({categorie:"",marque:"",model:"",code_materiel:"",serie:"",code_localisation:"",code_entite:"",date_installation:"",fin_garantie:"",statut:"",type_acquisition:"",date_achat:"",date_livraison:"",fournisseur:"",numero_facture:"",prix_achat:"",numero_appel_offre:"",numero_livraison:"",cout_maintenance:"",emploi_principal:"",niveau_criticite:"",sla:"",date_sortie:"",commentaire:""}),[r,j]=Object(a.useState)(!1),[h,b]=Object(a.useState)(null),u=Object(o.g)(),[p,m]=Object(a.useState)(1),[O,x]=Object(a.useState)(10),[g,f]=Object(a.useState)({}),[v,N]=Object(a.useState)([]),[S,y]=Object(a.useState)([]),[k,w]=Object(a.useState)({}),C=async()=>{try{const e=localStorage.getItem("token");if(!e)return void console.error("No token found");const n=await Ce.a.get("http://localhost:5000/api/it-equipments",{headers:{Authorization:"Bearer ".concat(e)}});console.log("Response from server:",n.data),t(n.data.equipments),y(n.data.equipments),l(n.data.uniqueValues)}catch(e){console.error("Error fetching IT Equipments:",e.message)}};Object(a.useEffect)((()=>{C()}),[]);const E=e=>{const{name:t,value:n}=e.target;r?b((e=>({...e,[t]:n}))):i((e=>({...e,[t]:n})))},_=c.a.useMemo((()=>{let t=e;if(Object.keys(g).forEach((e=>{g[e]&&g[e].length>0&&(t=t.filter((t=>{const n=null!=t[e]?t[e].toString().toLowerCase():"",a=Array.isArray(g[e])?g[e][0].value:g[e].value;return null==a||n.includes(a.toString().toLowerCase())})))})),v.length){const e=v[0];t=t.sort(((t,n)=>{const a=null!=t[e.id]?t[e.id].toString():"",c=null!=n[e.id]?n[e.id].toString():"";return a<c?e.desc?1:-1:a>c?e.desc?-1:1:0}))}return t}),[e,g,v,p,O]),P=c.a.useMemo((()=>{const e=p*O,t=e-O;return _.slice(t,e)}),[_,p,O]),A=c.a.useMemo((()=>P.map(((e,n)=>({rowNumber:(p-1)*O+n+1,actions:Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"modify-button",onClick:()=>(e=>{j(!0),b({...e,date_installation:Je(e.date_installation),fin_garantie:Je(e.fin_garantie),date_achat:Je(e.date_achat),date_livraison:Je(e.date_livraison),date_sortie:Je(e.date_sortie)})})(e),children:"Modify"}),Object(d.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{try{const n=localStorage.getItem("token");if(!n)return void console.error("No token found");console.log("Token:",n),await Ce.a.delete("http://localhost:5000/api/it-equipments/".concat(e),{headers:{Authorization:"Bearer ".concat(n)}}),t((t=>t.filter((t=>t.id!==e)))),console.log("Equipment deleted successfully")}catch(n){console.error("Error deleting IT Equipment:",n.message)}})(e.id),children:"Delete"})]}),...e})))),[P,p,O]),F=c.a.useMemo((()=>[{Header:"#",accessor:(e,t)=>(p-1)*O+t+1,disableFilters:!0,disableSortBy:!0},{Header:"Actions",accessor:"actions",disableFilters:!0,disableSortBy:!0},...Object.keys(s).map((e=>({Header:e.replace(/_/g," "),accessor:e,Filter:t=>{let{column:{filterValue:a,setFilter:c,id:l}}=t;return Object(d.jsx)(Ve.a,{value:a||"",onChange:e=>((e,t)=>{f((n=>({...n,[e]:t}))),w((n=>({...n,[e]:t.map((e=>e.label))})))})(l,e),options:n[l]?n[l].map((e=>({label:e.label,value:e.value}))):[],isMulti:!0,placeholder:"Filter by ".concat(e.replace(/_/g," ")),className:"filter-select"})}})))]),[s,p,O,n,k]),T=e=>{m(e)};return Object(d.jsxs)("div",{className:"it-equipment-manager",children:[Object(d.jsx)("button",{className:"itequipment-modify-back-button",onClick:()=>u.goBack(),children:"\u21a9"}),Object(d.jsx)("h1",{children:"IT Equipment Manager"}),Object(d.jsxs)("div",{className:"add-equipment",children:[Object(d.jsx)("table",{className:"form-table",children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"categorie"}),Object(d.jsx)(Ke,{name:"categorie",value:r?h.categorie:s.categorie,options:n.categorie||[],onChange:E,placeholder:"Entrer/Selectionner la categorie"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"marque"}),Object(d.jsx)(Ke,{name:"marque",value:r?h.marque:s.marque,options:n.marque||[],onChange:E,placeholder:"Entrer/Selectionner la marque"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"model"}),Object(d.jsx)(Ke,{name:"model",value:r?h.model:s.model,options:n.model||[],onChange:E,placeholder:"Entrer/Selectionner le model"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"code materiel"}),Object(d.jsx)(Ke,{name:"code_materiel",value:r?h.code_materiel:s.code_materiel,options:n.code_materiel||[],onChange:E,placeholder:"Entrer/Selectionner le code de materiel"})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"serie"}),Object(d.jsx)(Ke,{name:"serie",value:r?h.serie:s.serie,options:n.serie||[],onChange:E,placeholder:"Entrer/Selectionner la serie"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"code localisation"}),Object(d.jsx)(Ke,{name:"code_localisation",value:r?h.code_localisation:s.code_localisation,options:n.code_localisation||[],onChange:E,placeholder:"Entrer/Selectionner le code de localisation"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"code entite"}),Object(d.jsx)(Ke,{name:"code_entite",value:r?h.code_entite:s.code_entite,options:n.code_entite||[],onChange:E,placeholder:"Entrer/Selectionner le code d'entite"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"date installation"}),Object(d.jsx)("input",{type:"date",name:"date_installation",value:r?Je(h.date_installation):s.date_installation,onChange:E,className:"input-field",placeholder:"YYYY-MM-DD"})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"fin garantie"}),Object(d.jsx)("input",{type:"date",name:"fin_garantie",value:r?Je(h.fin_garantie):s.fin_garantie,onChange:E,className:"input-field",placeholder:"YYYY-MM-DD"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"statut"}),Object(d.jsx)(Ke,{name:"statut",value:r?h.statut:s.statut,options:n.statut||[],onChange:E,placeholder:"Entrer/Selectionner le status"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"type acquisition"}),Object(d.jsx)(Ke,{name:"type_acquisition",value:r?h.type_acquisition:s.type_acquisition,options:n.type_acquisition||[],onChange:E,placeholder:"Entrer/Selectionner le type d'acquisition"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"date achat"}),Object(d.jsx)("input",{type:"date",name:"date_achat",value:r?Je(h.date_achat):s.date_achat,onChange:E,className:"input-field",placeholder:"YYYY-MM-DD"})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"date livraison"}),Object(d.jsx)("input",{type:"date",name:"date_livraison",value:r?Je(h.date_livraison):s.date_livraison,onChange:E,className:"input-field",placeholder:"YYYY-MM-DD"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"fournisseur"}),Object(d.jsx)(Ke,{name:"fournisseur",value:r?h.fournisseur:s.fournisseur,options:n.fournisseur||[],onChange:E,placeholder:"Entrer/Selectionner le fournisseur"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"numero facture"}),Object(d.jsx)("input",{type:"text",name:"numero_facture",value:r?h.numero_facture:s.numero_facture,onChange:E,className:"input-field",placeholder:"Entrer le numero de facture"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"prix achat"}),Object(d.jsx)("input",{type:"text",name:"prix_achat",value:r?h.prix_achat:s.prix_achat,onChange:E,className:"input-field",placeholder:"Entrer le prix achat"})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"numero appel offre"}),Object(d.jsx)("input",{type:"text",name:"numero_appel_offre",value:r?h.numero_appel_offre:s.numero_appel_offre,onChange:E,className:"input-field",placeholder:"Entrer le numero d'appel offre"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"numero livraison"}),Object(d.jsx)("input",{type:"text",name:"numero_livraison",value:r?h.numero_livraison:s.numero_livraison,onChange:E,className:"input-field",placeholder:"Entrer le numero de livraison"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"cout maintenance"}),Object(d.jsx)("input",{type:"text",name:"cout_maintenance",value:r?h.cout_maintenance:s.cout_maintenance,onChange:E,className:"input-field",placeholder:"Entrer le cout de maintenance"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"emploi principal"}),Object(d.jsx)("input",{type:"text",name:"emploi_principal",value:r?h.emploi_principal:s.emploi_principal,onChange:E,className:"input-field",placeholder:"Entrer l'emploi principale"})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"niveau criticite"}),Object(d.jsx)(Ke,{name:"niveau_criticite",value:r?h.niveau_criticite:s.niveau_criticite,options:n.niveau_criticite||[],onChange:E,placeholder:"Entrer/Selectionner le niveau de criticit\xe9"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"sla"}),Object(d.jsx)(Ke,{name:"sla",value:r?h.sla:s.sla,options:n.sla||[],onChange:E,placeholder:"Entrer/Selectionner le SLA"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"date sortie"}),Object(d.jsx)("input",{type:"date",name:"date_sortie",value:r?Je(h.date_sortie):s.date_sortie,onChange:E,className:"input-field",placeholder:"YYYY-MM-DD"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{children:"commentaire"}),Object(d.jsx)("input",{type:"text",name:"commentaire",value:r?h.commentaire:s.commentaire,onChange:E,className:"input-field",placeholder:"Entrer un commentaire"})]})]})]})}),r?Object(d.jsx)("button",{onClick:async()=>{if("REFORME"!==h.statut||h.date_sortie)try{const e=localStorage.getItem("token");if(!e)return void console.error("No token found");console.log("Token:",e);const t=Ue(h);console.log("Updating equipment:",t);const n=await Ce.a.put("http://localhost:5000/api/it-equipments/".concat(h.id),t,{headers:{Authorization:"Bearer ".concat(e)}});console.log("Response from server:",n.data),C(),j(!1),b(null),console.log("Equipment updated successfully")}catch(e){console.error("Error updating IT Equipment:",e.message)}else alert('The "date sortie" field must be filled if the statut is "reforme".')},children:"Update Equipment"}):Object(d.jsx)("button",{onClick:async()=>{if("REFORME"!==s.statut||s.date_sortie)try{const e=Ue(s);console.log("Adding equipment:",e);const t=await Ce.a.post("http://localhost:5000/api/it-equipments",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Response from server:",t.data),C(),i({categorie:"",marque:"",model:"",code_materiel:"",serie:"",code_localisation:"",code_entite:"",date_installation:"",fin_garantie:"",statut:"",type_acquisition:"",date_achat:"",date_livraison:"",fournisseur:"",numero_facture:"",prix_achat:"",numero_appel_offre:"",numero_livraison:"",cout_maintenance:"",emploi_principal:"",niveau_criticite:"",sla:"",date_sortie:"",commentaire:""}),console.log("Equipment added successfully")}catch(e){console.error("Error adding IT Equipment:",e)}else alert('Le champ "date sortie" doit \xeatre rempli, si le statut est "REFORME".')},children:"Add Equipment"})]}),Object(d.jsxs)("div",{className:"itequipment-view-selected-filters-container",children:[Object(d.jsx)("h3",{children:"Filtres S\xe9lectionn\xe9s:"}),Object.keys(k).map((e=>k[e].map(((t,n)=>Object(d.jsxs)("span",{className:"itequipment-view-filter-chip",children:["".concat(e,": ").concat(t)," ",Object(d.jsx)("button",{onClick:()=>((e,t)=>{f((n=>{const a={...n};return a[e]=a[e].filter((e=>e.label!==t)),0===a[e].length&&delete a[e],a})),w((n=>{const a={...n};return a[e]=a[e].filter((e=>e!==t)),0===a[e].length&&delete a[e],a}))})(e,t),children:"x"})]},"".concat(e,"-").concat(n))))))]}),Object(d.jsx)("div",{className:"itequipment-view-table-container",children:Object(d.jsx)(We,{columns:F,data:A})}),Object(d.jsxs)("div",{className:"pagination-controls",children:[Object(d.jsx)("button",{onClick:()=>T(1),disabled:1===p,children:"<<"}),Object(d.jsx)("button",{onClick:()=>T(p-1),disabled:1===p,children:"Pr\xe9c\xe9dent"}),Object(d.jsxs)("span",{children:["Page ",p," of ",Math.ceil(_.length/O)]}),Object(d.jsx)("button",{onClick:()=>T(p+1),disabled:p===Math.ceil(_.length/O),children:"Suivant"}),Object(d.jsx)("button",{onClick:()=>T(Math.ceil(_.length/O)),disabled:p===Math.ceil(_.length/O),children:">>"}),Object(d.jsxs)("select",{value:O,onChange:e=>x(Number(e.target.value)),children:[Object(d.jsx)("option",{value:10,children:"Show 10"}),Object(d.jsx)("option",{value:25,children:"Show 25"}),Object(d.jsx)("option",{value:50,children:"Show 50"}),Object(d.jsx)("option",{value:100,children:"Show 100"})]})]})]})};n(142);const Ze={DATA:["VPNLL","VPLS","VPNADSL","ADSLSECOURS"],VOIX:["RTC","MARNIS"],MOBILE:["GSM"],INTERNET:["ADSL","4G"]},$e=e=>{if(!e||"------"===e)return"";return new Date(e).toISOString().split("T")[0]},et=e=>{const t=tt(e);return{...t,dateAbonnement:$e(t.dateAbonnement),dateReengagement:$e(t.dateReengagement),dateEtat:$e(t.dateEtat)}},tt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.fromEntries(Object.entries(e).map((e=>{let[n,a]=e;return""===a||null===a?[n,t]:[n,a]})))},nt=e=>{let{column:{filterValue:t,setFilter:n,id:a},options:c=[],placeholder:l,handleFilterChange:s,handleRemoveSelectedValue:i}=e;const o=c.map((e=>({value:e,label:e})));return Object(d.jsxs)("div",{children:[Object(d.jsx)(Ve.a,{value:o.filter((e=>t&&t.includes(e.value))),onChange:e=>{n(e?e.map((e=>e.value)):void 0),s(a,e)},options:o,isMulti:!0,placeholder:l||"Filter...",className:"filter-select",classNamePrefix:"filter-select"}),Object(d.jsx)("div",{className:"selected-values",children:t&&t.map((e=>Object(d.jsxs)("span",{className:"filter-badge",children:[e," ",Object(d.jsx)("button",{onClick:()=>i(a,e),children:"x"})]},e)))})]})},at=e=>{let{columns:t,data:n}=e;const{getTableProps:a,getTableBodyProps:c,headerGroups:l,rows:s,prepareRow:i}=Object(He.useTable)({columns:t,data:n},He.useFilters,He.useSortBy);return Object(d.jsxs)("table",{...a(),className:"data-table telecompack-view-data-table",children:[Object(d.jsx)("thead",{children:l.map((e=>Object(d.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(d.jsx)("th",{...e.getHeaderProps(e.getSortByToggleProps()),children:Object(d.jsxs)("div",{children:[e.render("Header"),Object(d.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""}),Object(d.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]})})))})))}),Object(d.jsx)("tbody",{...c(),children:s.map(((e,t)=>(i(e),Object(d.jsx)("tr",{...e.getRowProps(),className:t%2===0?"telecompack-view-row-even":"telecompack-view-row-odd",children:e.cells.map((e=>Object(d.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]})},ct=e=>{let{name:t,value:n,options:c,onChange:l,placeholder:s}=e;const[i,o]=Object(a.useState)(!1);return Object(d.jsxs)("div",{className:"dropdown-container",children:[Object(d.jsx)("input",{type:"text",name:t,value:n,onChange:l,placeholder:s}),Object(d.jsx)("div",{className:"dropdown-arrow",onClick:()=>o(!i),children:"\u25bc"}),i&&Object(d.jsx)("div",{className:"dropdown-menu",children:c.map(((e,n)=>Object(d.jsx)("div",{className:"dropdown-option",onClick:()=>(e=>{l({target:{name:t,value:e}}),o(!1)})(e),children:e},n)))})]})};var lt=()=>{const[e,t]=Object(a.useState)([]),[n,l]=Object(a.useState)([]),[s,i]=Object(a.useState)([]),[r,j]=Object(a.useState)({entite:[],operateur:[],produit:["DATA","VOIX","MOBILE","INTERNET"],etatAbonnement:[],produit2:[],numero:[],dateAbonnement:[],dateReengagement:[],dateEtat:[],observation:[],typePoste:[],numeroDeSerie:[],dateAffectation:[]}),[h,b]=Object(a.useState)({}),[u,p]=Object(a.useState)({entite:"",operateur:"",produit:"",produit2:"",numero:"",etatAbonnement:"",dateAbonnement:"",dateReengagement:"",dateEtat:"",observation:"",typePoste:"",numeroDeSerie:"",dateAffectation:""}),[m,O]=Object(a.useState)(!1),[x,g]=Object(a.useState)(null),f=Object(o.g)(),[v,N]=Object(a.useState)([]),[S,y]=Object(a.useState)(""),[k,w]=Object(a.useState)(10),[C,E]=Object(a.useState)(1),[_,P]=Object(a.useState)(1),A=e=>{E(e)};Object(a.useEffect)((()=>{(async()=>{try{const e=(await Ce.a.get("http://localhost:5000/api/telecom-packs",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data.map(et);e.sort(((e,t)=>e.entite.match(/\d+/)-t.entite.match(/\d+/))),i(e),T(e,h)}catch(e){console.error("Error fetching Telecom Packs:",e.message),alert("Failed to fetch telecom packs: "+e.message)}})(),F()}),[]);const F=async()=>{try{const e=["entite","operateur","etatAbonnement","produit2","numero","dateAbonnement","dateReengagement","dateEtat","observation","typePoste","numeroDeSerie","dateAffectation"],t={};for(const n of e){const e=await Ce.a.get("http://localhost:5000/api/telecom-packs/dropdown/".concat(n),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),a=Array.from(new Set(e.data.filter((e=>""!==e))));t[n]=a}t.produit=["DATA","VOIX","MOBILE","INTERNET"],j(t)}catch(e){console.error("Error fetching dropdown options:",e.message),alert("Failed to fetch dropdown options: "+e.message)}},T=(e,t)=>{let n=e;Object.keys(t).forEach((e=>{t[e].length>0&&(n=n.filter((n=>t[e].includes(n[e]))))})),l(n),P(Math.ceil(n.length/k)),E(1)},q=(e,t)=>{const n=t?t.map((e=>e.value)):[];b((t=>{const a={...t,[e]:n};return T(s,a),a}))},M=(e,t)=>{const n=h[e].filter((e=>e!==t)),a={...h,[e]:n};b(a),T(s,a)},D=e=>{const{name:t,value:n}=e.target;m?g((e=>({...e,[t]:n}))):p((e=>({...e,[t]:n})))},I=c.a.useMemo((()=>[{Header:"#",accessor:(e,t)=>(C-1)*k+t+1,disableFilters:!0,disableSortBy:!0},{Header:"Actions",accessor:"actions",disableFilters:!0,disableSortBy:!0,Cell:e=>{let{row:t}=e;return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"modify-button",onClick:()=>(e=>{O(!0),g({...e,dateAbonnement:$e(e.dateAbonnement),dateReengagement:$e(e.dateReengagement),dateEtat:$e(e.dateEtat)});const t=Ze[e.produit]||[];N(t),y(e.produit2)})(t.original),children:"Modify"}),Object(d.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{try{await Ce.a.delete("http://localhost:5000/api/telecom-packs/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});const t=s.filter((t=>t.id!==e));i(t),T(t,h)}catch(t){console.error("Error deleting Telecom Pack:",t.message),alert("Failed to delete telecom pack: "+t.message)}})(t.original.id),children:"Delete"})]})}},{Header:"Entite",accessor:"entite",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.entite,placeholder:"Filtrer par Entite",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Operateur",accessor:"operateur",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.operateur,placeholder:"Filtrer par Operateur",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Sous-Produit",accessor:"produit2",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.produit2,placeholder:"Filtrer par Sous-Produit",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Numero",accessor:"numero",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.numero,placeholder:"Filtrer par Numero",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Etat d'Abonnement",accessor:"etatAbonnement",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.etatAbonnement,placeholder:"Filtrer par Etat d'Abonnement",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Date d'Abonnement",accessor:"dateAbonnement",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.dateAbonnement,placeholder:"Filtrer par Date d'Abonnement",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Date de Reengagement",accessor:"dateReengagement",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.dateReengagement,placeholder:"Filtrer par Date de Reengagement",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Date d'Etat",accessor:"dateEtat",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.dateEtat,placeholder:"Filtrer par Date d'Etat",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Observation",accessor:"observation",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.observation,placeholder:"Filtrer par Observation",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Type de Poste",accessor:"typePoste",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.typePoste,placeholder:"Filtrer par Type de Poste",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Numero de Serie",accessor:"numeroDeSerie",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.numeroDeSerie,placeholder:"Filtrer par Numero de Serie",handleFilterChange:q,handleRemoveSelectedValue:M})}},{Header:"Date d'Affectation",accessor:"dateAffectation",Filter:e=>{let{column:t}=e;return Object(d.jsx)(nt,{column:t,options:r.dateAffectation,placeholder:"Filtrer par Date d'Affectation",handleFilterChange:q,handleRemoveSelectedValue:M})}}]),[C,k,r,h]),R=c.a.useMemo((()=>{const e=(C-1)*k,t=e+k;return n.slice(e,t)}),[n,C,k]);return Object(d.jsxs)("div",{className:"telecom-pack-manager",children:[Object(d.jsx)("button",{className:"telecompack-modify-back-button",onClick:()=>f.goBack(),children:"\u21a9"}),Object(d.jsx)("h1",{children:"Telecom Pack Manager"}),Object(d.jsxs)("div",{className:"add-pack",children:[Object(d.jsx)("table",{className:"form-table telecom-pack-form-table",children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Entite"}),Object(d.jsx)(ct,{name:"entite",value:m?x.entite:u.entite,options:r.entite||[],onChange:D,placeholder:"Selectionner Entite"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Operateur"}),Object(d.jsx)(ct,{name:"operateur",value:m?x.operateur:u.operateur,options:r.operateur||[],onChange:D,placeholder:"Selectionner Operateur"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Produit"}),Object(d.jsx)(ct,{name:"produit",value:m?x.produit:u.produit,options:r.produit||[],onChange:e=>{const{value:t}=e.target;N(Ze[t]||[]),y(""),m?g((e=>({...e,produit:t,produit2:""}))):p((e=>({...e,produit:t,produit2:""})))},placeholder:"Selectionner Produit"})]})]}),(m?x.produit:u.produit)&&v.length>0&&Object(d.jsx)("tr",{children:Object(d.jsxs)("td",{colSpan:"3",children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Sous-Produit"}),Object(d.jsx)(ct,{name:"produit2",value:m?x.produit2:S,options:v,onChange:e=>{const{value:t}=e.target;m?g((e=>({...e,produit2:t}))):p((e=>({...e,produit2:t}))),y(t)},placeholder:"Selectionner Produit2"})]})}),Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Numero de GSM"}),Object(d.jsx)("input",{type:"text",name:"numero",value:m?x.numero:u.numero,onChange:D,className:"input-field",placeholder:"eg: 212XXXXXXXXX"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Etat d'abonnement"}),Object(d.jsx)(ct,{name:"etatAbonnement",value:m?x.etatAbonnement:u.etatAbonnement,options:r.etatAbonnement||[],onChange:D,placeholder:"Selectionner Etat Abonnement"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Date d'abonnement"}),Object(d.jsx)("input",{type:"date",name:"dateAbonnement",value:m?x.dateAbonnement:u.dateAbonnement,onChange:D,className:"input-field",placeholder:"Entrer dateAbonnement"})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Date de reengagement"}),Object(d.jsx)("input",{type:"date",name:"dateReengagement",value:m?x.dateReengagement:u.dateReengagement,onChange:D,className:"input-field",placeholder:"Entrer dateReengagement"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Date d'etat"}),Object(d.jsx)("input",{type:"date",name:"dateEtat",value:m?x.dateEtat:u.dateEtat,onChange:D,className:"input-field",placeholder:"Entrer date d'etat"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Observation"}),Object(d.jsx)("input",{type:"text",name:"observation",value:m?x.observation:u.observation,onChange:D,className:"input-field",placeholder:"Entrer une observation"})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Type de Poste"}),Object(d.jsx)("input",{type:"text",name:"typePoste",value:m?x.typePoste:u.typePoste,onChange:D,className:"input-field",placeholder:"Entrer Type de Poste"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Numero de Serie"}),Object(d.jsx)("input",{type:"text",name:"numeroDeSerie",value:m?x.numeroDeSerie:u.numeroDeSerie,onChange:D,className:"input-field",placeholder:"Entrer Numero de Serie"})]}),Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telecom-pack-form-label",children:"Date d'Affectation"}),Object(d.jsx)("input",{type:"date",name:"dateAffectation",value:m?x.dateAffectation:u.dateAffectation,onChange:D,className:"input-field",placeholder:"Entrer Date d'Affectation"})]})]})]})}),Object(d.jsx)("button",{className:"add-pack",onClick:m?async()=>{try{const{produit:e,...t}=tt({...x}),n=(await Ce.a.put("http://localhost:5000/api/telecom-packs/".concat(x.id),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data,a=s.map((e=>e.id===n.id?n:e));i(a),T(a,h),O(!1),g(null),y(""),N([])}catch(e){console.error("Error updating Telecom Pack:",e.message),alert("Failed to update telecom pack: "+e.message)}}:async()=>{if(u.entite)try{const{produit:e,...t}=tt({...u}),n=(await Ce.a.post("http://localhost:5000/api/telecom-packs",t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data,a=[...s,n];i(a),T(a,h),p({entite:"",operateur:"",produit:"",produit2:"",numero:"",etatAbonnement:"",dateAbonnement:"",dateReengagement:"",dateEtat:"",observation:"",typePoste:"",numeroDeSerie:"",dateAffectation:""}),y(""),N([])}catch(e){console.error("Error adding Telecom Pack:",e.message),alert("Failed to add telecom pack: "+e.message)}else alert('The "entite" field must be filled.')},children:m?"Update Pack":"Add Pack"})]}),Object(d.jsxs)("div",{className:"selected-filters",children:[Object(d.jsx)("h3",{children:"Filtres S\xe9lectionn\xe9s:"}),Object(d.jsx)("div",{children:Object.keys(h).map((e=>h[e].length>0&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("strong",{children:[e,":"]})," ",h[e].map((t=>Object(d.jsxs)("span",{className:"filter-badge",children:[t," ",Object(d.jsx)("button",{onClick:()=>((e,t)=>{const n=h[e].filter((e=>e!==t)),a={...h,[e]:n};b(a),T(s,a)})(e,t),children:"x"})]},t)))]},e)))})]}),Object(d.jsx)("div",{className:"table-container",children:Object(d.jsx)(at,{columns:I,data:R})}),Object(d.jsxs)("div",{className:"pagination-controls",children:[Object(d.jsx)("button",{onClick:()=>A(1),disabled:1===C,children:"<<"}),Object(d.jsx)("button",{onClick:()=>A(C-1),disabled:1===C,children:"Pr\xe9c\xe9dent"}),Object(d.jsxs)("span",{children:["Page ",C," of ",_]}),Object(d.jsx)("button",{onClick:()=>A(C+1),disabled:C===_,children:"Suivant"}),Object(d.jsx)("button",{onClick:()=>A(_),disabled:C===_,children:">>"}),Object(d.jsxs)("select",{value:k,onChange:e=>{w(parseInt(e.target.value,10)),E(1)},children:[Object(d.jsx)("option",{value:10,children:"Show 10"}),Object(d.jsx)("option",{value:25,children:"Show 25"}),Object(d.jsx)("option",{value:50,children:"Show 50"}),Object(d.jsx)("option",{value:100,children:"Show 100"})]})]})]})};n(143);ze.a.setAppElement("#root");var st=()=>{const e=Object(o.g)(),{user:t}=p(),[n,c]=Object(a.useState)(!1),l=()=>{c(!1)};return Object(d.jsxs)("div",{className:"telecom-landing-container",children:[Object(d.jsx)("div",{className:"telecom-card telecom-view-card",onClick:()=>e.push("/telecom-pack-view"),children:Object(d.jsxs)("div",{className:"telecom-card-content",children:[Object(d.jsx)("h3",{children:"Afficher Parc Telecom"}),Object(d.jsxs)("p",{children:["\u29bfVoir tableau ",Object(d.jsx)("br",{}),"\u29bfExporter Excel"]})]})}),Object(d.jsx)("div",{className:"telecom-card telecom-modify-card",onClick:()=>{t&&"admin"===t.role?e.push("/telecom-pack-manager"):c(!0)},children:Object(d.jsxs)("div",{className:"telecom-card-content",children:[Object(d.jsx)("h3",{children:"Modifier Parc Telecom"}),Object(d.jsx)("p",{children:"\u29bfPlus d'infos"})]})}),Object(d.jsxs)(ze.a,{isOpen:n,onRequestClose:l,contentLabel:"Access Denied",className:"modal",overlayClassName:"overlay",children:[Object(d.jsx)("h2",{children:"Access Denied"}),Object(d.jsx)("p",{children:"You do not have permission to modify this page."}),Object(d.jsx)("button",{onClick:l,children:"Close"})]})]})};n(144);const it=e=>{let{column:{filterValue:t=[],setFilter:n,id:c},uniqueValues:l}=e;const[s,i]=Object(a.useState)((()=>t.map((e=>({value:e,label:e})))));return Object(d.jsxs)("div",{className:"telecompack-view-filter-container",children:[Object(d.jsx)(Ve.a,{value:s,onChange:e=>{const t=e?e.map((e=>e.value)):[];i(e),n(t.length?t:void 0)},options:l,isMulti:!0,placeholder:"Filter by...",className:"telecompack-view-filter-select"}),s.length>0&&Object(d.jsx)("div",{className:"telecompack-view-selected-filters",children:s.map(((e,t)=>Object(d.jsxs)("span",{className:"telecompack-view-filter-chip",children:[e.value," ",Object(d.jsx)("button",{onClick:()=>((e,t)=>{const a=s.filter((e=>e.value!==t)),c=a.map((e=>e.value));i(a),n(c.length?c:void 0)})(0,e.value),children:"x"})]},t)))})]})};var ot=()=>{const[e,t]=Object(a.useState)([]),[n,c]=Object(a.useState)([]),[l,s]=Object(a.useState)([]),[i,r]=Object(a.useState)({}),[j,h]=Object(a.useState)({}),b=Object(o.g)();Object(a.useEffect)((()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=(await Ce.a.get("http://localhost:5000/api/telecom-packs",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:e})).data.map((e=>{let{createdAt:t,updatedAt:n,id:a,...c}=e;return u(c)}));t(n),c(n);const a=Object.keys(n[0]||{}),l={};a.forEach((e=>{l[e]=[...new Set(n.map((t=>t[e])))].map((e=>({value:e,label:e})))}));const i=[{Header:"#",accessor:(e,t)=>t+1,disableFilters:!0,disableSortBy:!0,width:50},...a.map((e=>({Header:e.replace(/_/g," "),accessor:e,Filter:t=>Object(d.jsx)(it,{...t,originalData:n,uniqueValues:l[e]})})))];s(i),r(l)}catch(n){console.error("Error fetching Telecom Packs:",n),alert("Error fetching Telecom Packs: "+n.message)}}(j)}),[j]);const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"------";return Object.fromEntries(Object.entries(e).map((e=>{let[n,a]=e;return""===a||null===a?[n,t]:[n,a]})))},p=e=>{let{columns:t,data:n}=e;const{getTableProps:a,getTableBodyProps:c,headerGroups:l,prepareRow:s,page:i,canPreviousPage:o,canNextPage:r,pageOptions:j,state:{pageIndex:h,pageSize:b},gotoPage:u,nextPage:p,previousPage:m,setPageSize:O}=Object(He.useTable)({columns:t,data:n,defaultColumn:{minWidth:30,width:150,maxWidth:400},initialState:{pageIndex:0}},He.useFilters,He.useSortBy,He.usePagination);return Object(d.jsxs)("div",{className:"telecompack-view-table-container",children:[Object(d.jsxs)("table",{...a(),className:"telecompack-view-data-table",children:[Object(d.jsx)("thead",{children:l.map((e=>Object(d.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(d.jsx)("th",{...e.getHeaderProps(e.getSortByToggleProps()),children:Object(d.jsxs)("div",{style:{width:e.width},children:[e.render("Header"),Object(d.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(d.jsx)(q.e,{}):Object(d.jsx)(q.f,{}):Object(d.jsx)(q.d,{})}),Object(d.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]})})))})))}),Object(d.jsx)("tbody",{...c(),children:i.map(((e,t)=>(s(e),Object(d.jsx)("tr",{...e.getRowProps(),className:t%2===0?"telecompack-view-row-even":"telecompack-view-row-odd",children:e.cells.map((e=>Object(d.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]}),Object(d.jsxs)("div",{className:"pagination-controls",children:[Object(d.jsx)("button",{onClick:()=>u(0),disabled:!o,children:"<<"}),Object(d.jsx)("button",{onClick:()=>m(),disabled:!o,children:"Pr\xe9c\xe9dent"}),Object(d.jsxs)("span",{children:["Page"," ",Object(d.jsxs)("strong",{children:[h+1," of ",j.length]})," "]}),Object(d.jsx)("button",{onClick:()=>p(),disabled:!r,children:"Suivant"}),Object(d.jsx)("button",{onClick:()=>u(j.length-1),disabled:!r,children:">>"}),Object(d.jsx)("select",{value:b,onChange:e=>{O(Number(e.target.value))},children:[10,25,50,100].map((e=>Object(d.jsxs)("option",{value:e,children:["Show ",e]},e)))})]})]})};return Object(d.jsxs)("div",{className:"telecompack-view-container",children:[Object(d.jsx)("button",{className:"telecompack-view-back-button",onClick:()=>b.push("/telecom-packs"),children:"\u21a9"}),Object(d.jsx)("h1",{className:"telecompack-view-title",children:"Afficher Parc Telecom"}),Object(d.jsx)("div",{className:"telecompack-view-selected-filters-container",children:Object.keys(j).map((e=>j[e].map(((t,n)=>Object(d.jsxs)("span",{className:"telecompack-view-filter-chip",children:["".concat(e,": ").concat(t)," ",Object(d.jsx)("button",{onClick:()=>((e,t)=>{h((n=>{const a={...n};return a[e]=a[e].filter((e=>e!==t)),0===a[e].length&&delete a[e],a}))})(e,t),children:"x"})]},"".concat(e,"-").concat(n))))))}),l.length>0&&Object(d.jsx)(p,{columns:l,data:n}),Object(d.jsx)("div",{className:"telecompack-view-footer",children:Object(d.jsx)("button",{className:"telecompack-view-export-button",onClick:()=>(e=>{const t=Me.b.json_to_sheet(e),n=Me.b.book_new();Me.b.book_append_sheet(n,t,"TelecomPacks"),Me.c(n,"TelecomPacks.xlsx")})(n),children:"Export to Excel"})})]})};n(145);const rt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"------";return Object.fromEntries(Object.entries(e).map((e=>{let[n,a]=e;return""===a||null===a?[n,t]:[n,a]})))},dt=e=>({numero_de_gsm:"Numero de GSM",full_name:"Nom et Pr\xe9nom",code_entite:"Code Entit\xe9",direction:"Direction",fonction:"Fonction",operateur:"Op\xe9rateur",categorie:"Cat\xe9gorie",poste_GSM:"Poste GSM"}[e]||e.replace(/_/g," ")),jt=e=>{let{column:{filterValue:t,setFilter:n,id:a},options:c=[],placeholder:l,handleFilterChange:s,handleRemoveFilter:i}=e;const o=c.map((e=>({value:e.value,label:e.label})));return Object(d.jsxs)("div",{children:[Object(d.jsx)(Ve.a,{value:o.filter((e=>t&&t.includes(e.value))),onChange:e=>{n(e?e.map((e=>e.value)):void 0),s(a,e)},options:o,isMulti:!0,placeholder:l||"Filter...",className:"filter-select",classNamePrefix:"filter-select"}),Object(d.jsx)("div",{className:"selected-values",children:t&&t.map((e=>Object(d.jsxs)("span",{className:"filter-badge",children:[e," ",Object(d.jsx)("button",{onClick:()=>i(a,e),children:"x"})]},e)))})]})},ht=e=>{let{columns:t,data:n}=e;const{getTableProps:a,getTableBodyProps:c,headerGroups:l,rows:s,prepareRow:i}=Object(He.useTable)({columns:t,data:n,disableMultiSort:!1},He.useFilters,He.useSortBy);return Object(d.jsxs)("table",{...a(),className:"data-table telephone-line-view-data-table",children:[Object(d.jsx)("thead",{children:l.map((e=>Object(d.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(d.jsx)("th",{...e.getHeaderProps(e.getSortByToggleProps()),children:Object(d.jsxs)("div",{children:[e.render("Header"),Object(d.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""}),Object(d.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]})})))})))}),Object(d.jsx)("tbody",{...c(),children:s.map(((e,t)=>(i(e),Object(d.jsx)("tr",{...e.getRowProps(),className:t%2===0?"telephone-line-view-row-even":"telephone-line-view-row-odd",children:e.cells.map((e=>Object(d.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]})},bt=e=>{let{name:t,value:n,options:c,onChange:l,placeholder:s}=e;const[i,o]=Object(a.useState)(!1);return Object(d.jsxs)("div",{className:"dropdown-container",children:[Object(d.jsx)("input",{type:"text",name:t,value:n,onChange:l,placeholder:s}),Object(d.jsx)("div",{className:"dropdown-arrow",onClick:()=>o(!i),children:"\u25bc"}),i&&Object(d.jsx)("div",{className:"dropdown-menu",children:c.map(((e,n)=>Object(d.jsx)("div",{className:"dropdown-option",onClick:()=>(e=>{l({target:{name:t,value:e.value}}),o(!1)})(e),children:e.label},n)))})]})};var ut=()=>{const[e,t]=Object(a.useState)([]),[n,l]=Object(a.useState)([]),[s,i]=Object(a.useState)([]),[r,j]=Object(a.useState)({code_entite:[],direction:[],fonction:[],operateur:[],categorie:[],poste_GSM:[]}),[h,b]=Object(a.useState)({}),[u,p]=Object(a.useState)({numero_de_gsm:"",full_name:"",code_entite:"",direction:"",fonction:"",operateur:"",categorie:"",poste_GSM:""}),[m,O]=Object(a.useState)(!1),[x,g]=Object(a.useState)(null),f=Object(o.g)(),[v,N]=Object(a.useState)(1),[S,y]=Object(a.useState)(10),k=Math.ceil(s.length/S),w=e=>{N(e)};Object(a.useEffect)((()=>{(async()=>{try{const e=(await Ce.a.get("http://localhost:5000/api/telephone-lines",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data.map((e=>rt(e)));l(e),E(e,h)}catch(e){console.error("Error fetching Telephone Lines:",e.message),alert("Failed to fetch telephone lines: "+e.message)}})(),C()}),[]);const C=async()=>{try{const e=["code_entite","direction","fonction","operateur","categorie","poste_GSM","numero_de_gsm","full_name"],t={};for(const n of e){const e=await Ce.a.get("http://localhost:5000/api/telephone-lines/dropdown/".concat(n),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),a=Array.from(new Set(e.data.filter((e=>""!==e))));t[n]=a.map((e=>({value:e,label:e})))}j(t)}catch(e){console.error("Error fetching dropdown options:",e.message),alert("Failed to fetch dropdown options: "+e.message)}},E=(e,t)=>{let n=e;Object.keys(t).forEach((e=>{t[e].length>0&&(n=n.filter((n=>t[e].includes(n[e]))))})),i(n),N(1)},_=(e,t)=>{const a=t?t.map((e=>e.value)):[];b((t=>{const c={...t,[e]:a};return E(n,c),c}))},P=(e,t)=>{const a=h[e].filter((e=>e!==t)),c={...h,[e]:a};b(c),E(n,c)},A=e=>{const{name:t,value:n}=e.target;m?g((e=>({...e,[t]:n}))):p((e=>({...e,[t]:n})))},F=c.a.useMemo((()=>[{Header:"#",accessor:(e,t)=>(v-1)*S+t+1,disableFilters:!0,disableSortBy:!0,width:50},{Header:"Actions",accessor:"actions",disableFilters:!0,disableSortBy:!0,width:120,Cell:e=>{let{row:t}=e;return Object(d.jsxs)("div",{className:"actions-column",children:[Object(d.jsx)("button",{className:"modify-button",onClick:()=>{return e=t.original,O(!0),void g(e);var e},children:"Modify"}),Object(d.jsx)("button",{className:"delete-button",onClick:()=>(async e=>{try{await Ce.a.delete("http://localhost:5000/api/telephone-lines/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});const t=n.filter((t=>t.id!==e));l(t),E(t,h)}catch(t){console.error("Error deleting Telephone Line:",t.message),alert("Failed to delete telephone line: "+t.message)}})(t.original.id),children:"Delete"})]})}},...Object.keys(u).map((e=>({Header:dt(e),accessor:e,Filter:t=>{let{column:n}=t;return Object(d.jsx)(jt,{column:n,options:r[e],placeholder:"Filter by ".concat(dt(e)),handleFilterChange:_,handleRemoveFilter:P})}})))]),[u,v,S,r,h]),T=c.a.useMemo((()=>{const e=(v-1)*S,t=e+S;return s.slice(e,t)}),[s,v,S]);return Object(d.jsxs)("div",{className:"telephone-line-manager",children:[Object(d.jsx)("button",{className:"telephone-line-modify-back-button",onClick:()=>f.goBack(),children:"\u21a9"}),Object(d.jsx)("h1",{children:"Line T\xe9l\xe9phonique Manager"}),Object(d.jsxs)("div",{className:"add-line",children:[Object(d.jsx)("table",{className:"form-table telephone-line-form-table",children:Object(d.jsx)("tbody",{children:Object.keys(u).map(((e,t)=>t%3===0&&Object(d.jsx)("tr",{children:Object.keys(u).slice(t,t+3).map((e=>Object(d.jsxs)("td",{children:[Object(d.jsx)("label",{className:"telephone-line-form-label",children:dt(e)}),["code_entite","direction","fonction","operateur","categorie","poste_GSM"].includes(e)?Object(d.jsx)(bt,{name:e,value:m?x[e]:u[e],options:r[e]||[],onChange:A,placeholder:"Entrer/Selectionner ".concat(e.replace(/_/g," "))}):Object(d.jsx)("input",{type:e.startsWith("date")?"date":"text",name:e,value:m?x[e]:u[e],onChange:A,className:"input-field",placeholder:"numero_de_gsm"===e?"eg: 212XXXXXXXXX":"Entrer ".concat(e.replace(/_/g," "))})]},e)))},t)))})}),m?Object(d.jsx)("button",{className:"update-button",onClick:async()=>{try{const e=rt(x),t=(await Ce.a.put("http://localhost:5000/api/telephone-lines/".concat(x.id),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data,a=n.map((e=>e.id===t.id?t:e));l(a),E(a,h),O(!1),g(null)}catch(e){console.error("Error updating Telephone Line:",e.message),alert("Failed to update telephone line: "+e.message)}},children:"Update Line"}):Object(d.jsx)("button",{className:"add-button",onClick:async()=>{if(u.numero_de_gsm)try{const e=rt(u),t=(await Ce.a.post("http://localhost:5000/api/telephone-lines",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data,a=[...n,t];l(a),E(a,h),p({numero_de_gsm:"",full_name:"",code_entite:"",direction:"",fonction:"",operateur:"",categorie:"",poste_GSM:""})}catch(e){console.error("Error adding Telephone Line:",e.message),alert("Failed to add telephone line: "+e.message)}else alert('The "numero_de_gsm" field must be filled.')},children:"Add Line"})]}),Object(d.jsxs)("div",{className:"selected-filters",children:[Object(d.jsx)("h3",{children:"Selected Filters:"}),Object(d.jsx)("div",{children:Object.keys(h).map((e=>h[e].length>0&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("strong",{children:[dt(e),":"]})," ",h[e].map((t=>Object(d.jsxs)("span",{className:"filter-badge",children:[t," ",Object(d.jsx)("button",{onClick:()=>P(e,t),children:"x"})]},t)))]},e)))})]}),Object(d.jsx)("div",{className:"table-container",children:Object(d.jsx)(ht,{columns:F,data:T})}),Object(d.jsxs)("div",{className:"pagination-controls",children:[Object(d.jsx)("button",{onClick:()=>w(1),disabled:1===v,children:"<<"}),Object(d.jsx)("button",{onClick:()=>w(v-1),disabled:1===v,children:"Pr\xe9c\xe9dent"}),Object(d.jsxs)("span",{children:["Page ",v," of ",k]}),Object(d.jsx)("button",{onClick:()=>w(v+1),disabled:v===k,children:"Suivant"}),Object(d.jsx)("button",{onClick:()=>w(k),disabled:v===k,children:">>"}),Object(d.jsxs)("select",{value:S,onChange:e=>{y(parseInt(e.target.value,10)),N(1)},children:[Object(d.jsx)("option",{value:10,children:"Show 10"}),Object(d.jsx)("option",{value:25,children:"Show 25"}),Object(d.jsx)("option",{value:50,children:"Show 50"}),Object(d.jsx)("option",{value:100,children:"Show 100"})]})]})]})};n(146);ze.a.setAppElement("#root");var pt=()=>{const e=Object(o.g)(),{user:t}=p(),[n,c]=Object(a.useState)(!1),l=()=>{c(!1)};return Object(d.jsxs)("div",{className:"telephone-landing-container",children:[Object(d.jsx)("div",{className:"telephone-card telephone-view-card",onClick:()=>e.push("/telephone-line-view"),children:Object(d.jsxs)("div",{className:"telephone-card-content",children:[Object(d.jsx)("h3",{children:"Afficher Line T\xe9l\xe9phonique"}),Object(d.jsxs)("p",{children:["\u29bfVoir tableau ",Object(d.jsx)("br",{}),"\u29bfExporter Excel"]})]})}),Object(d.jsx)("div",{className:"telephone-card telephone-modify-card",onClick:()=>{t&&"admin"===t.role?e.push("/telephone-line-manager"):c(!0)},children:Object(d.jsxs)("div",{className:"telephone-card-content",children:[Object(d.jsx)("h3",{children:"Modifier Line T\xe9l\xe9phonique"}),Object(d.jsx)("p",{children:"\u29bfPlus d'infos"})]})}),Object(d.jsxs)(ze.a,{isOpen:n,onRequestClose:l,contentLabel:"Access Denied",className:"modal",overlayClassName:"overlay",children:[Object(d.jsx)("h2",{children:"Access Denied"}),Object(d.jsx)("p",{children:"You do not have permission to modify this page."}),Object(d.jsx)("button",{onClick:l,children:"Close"})]})]})};n(147);const mt=e=>{let{column:{filterValue:t=[],setFilter:n,id:c},uniqueValues:l}=e;const[s,i]=Object(a.useState)((()=>t.map((e=>({value:e,label:e})))));return Object(d.jsxs)("div",{className:"telephoneline-view-filter-container",children:[Object(d.jsx)(Ve.a,{value:s,onChange:e=>{const t=e?e.map((e=>e.value)):[];i(e),n(t.length?t:void 0)},options:l,isMulti:!0,placeholder:"Filter by...",className:"telephoneline-view-filter-select"}),s.length>0&&Object(d.jsx)("div",{className:"telephoneline-view-selected-filters",children:s.map(((e,t)=>Object(d.jsxs)("span",{className:"telephoneline-view-filter-chip",children:[e.value," ",Object(d.jsx)("button",{onClick:()=>((e,t)=>{const a=s.filter((e=>e.value!==t)),c=a.map((e=>e.value));i(a),n(c.length?c:void 0)})(0,e.value),children:"x"})]},t)))})]})};var Ot=()=>{const[e,t]=Object(a.useState)([]),[n,c]=Object(a.useState)([]),[l,s]=Object(a.useState)([]),[i,r]=Object(a.useState)({}),[j,h]=Object(a.useState)({}),b=Object(o.g)();Object(a.useEffect)((()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=(await Ce.a.get("http://localhost:5000/api/telephone-lines",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},params:e})).data.map((e=>{let{createdAt:t,updatedAt:n,id:a,...c}=e;return u(c)}));t(n),c(n);const a=Object.keys(n[0]||{}),l={};a.forEach((e=>{l[e]=[...new Set(n.map((t=>t[e])))].map((e=>({value:e,label:e})))}));const i=[{Header:"#",accessor:(e,t)=>t+1,disableFilters:!0,disableSortBy:!0,width:50},...a.map((e=>({Header:p(e),accessor:e,Filter:t=>Object(d.jsx)(mt,{...t,originalData:n,uniqueValues:l[e]})})))];s(i),r(l)}catch(n){console.error("Error fetching Telephone Lines:",n),alert("Error fetching Telephone Lines: "+n.message)}}(j)}),[j]);const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"------";return Object.fromEntries(Object.entries(e).map((e=>{let[n,a]=e;return""===a||null===a?[n,t]:[n,a]})))},p=e=>({numero_de_gsm:"Numero de GSM",full_name:"Nom et Pr\xe9nom",code_entite:"Code Entite",direction:"Direction",fonction:"Fonction",operateur:"Op\xe9rateur",categorie:"Cat\xe9gorie",poste_GSM:"Poste GSM"}[e]||e.replace(/_/g," ")),m=e=>{let{columns:t,data:n}=e;const{getTableProps:a,getTableBodyProps:c,headerGroups:l,prepareRow:s,page:i,canPreviousPage:o,canNextPage:r,pageOptions:j,state:{pageIndex:h,pageSize:b},gotoPage:u,nextPage:p,previousPage:m,setPageSize:O}=Object(He.useTable)({columns:t,data:n,defaultColumn:{minWidth:30,width:150,maxWidth:400},initialState:{pageIndex:0}},He.useFilters,He.useSortBy,He.usePagination);return Object(d.jsxs)("div",{className:"telephoneline-view-table-container",children:[Object(d.jsxs)("table",{...a(),className:"telephoneline-view-data-table",children:[Object(d.jsx)("thead",{children:l.map((e=>Object(d.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(d.jsx)("th",{...e.getHeaderProps(e.getSortByToggleProps()),children:Object(d.jsxs)("div",{style:{width:e.width},children:[e.render("Header"),Object(d.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(d.jsx)(q.e,{}):Object(d.jsx)(q.f,{}):Object(d.jsx)(q.d,{})}),Object(d.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]})})))})))}),Object(d.jsx)("tbody",{...c(),children:i.map(((e,t)=>(s(e),Object(d.jsx)("tr",{...e.getRowProps(),className:t%2===0?"telephoneline-view-row-even":"telephoneline-view-row-odd",children:e.cells.map((e=>Object(d.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]}),Object(d.jsxs)("div",{className:"pagination-controls",children:[Object(d.jsx)("button",{onClick:()=>u(0),disabled:!o,children:"<<"}),Object(d.jsx)("button",{onClick:()=>m(),disabled:!o,children:"Pr\xe9c\xe9dent"}),Object(d.jsxs)("span",{children:["Page"," ",Object(d.jsxs)("strong",{children:[h+1," of ",j.length]})," "]}),Object(d.jsx)("button",{onClick:()=>p(),disabled:!r,children:"Suivant"}),Object(d.jsx)("button",{onClick:()=>u(j.length-1),disabled:!r,children:">>"}),Object(d.jsx)("select",{value:b,onChange:e=>{O(Number(e.target.value))},children:[10,25,50,100].map((e=>Object(d.jsxs)("option",{value:e,children:["Show ",e]},e)))})]})]})};return Object(d.jsxs)("div",{className:"telephoneline-view-container",children:[Object(d.jsx)("button",{className:"telephoneline-view-back-button",onClick:()=>b.push("/telephone-lines"),children:"\u21a9"}),Object(d.jsx)("h1",{className:"telephoneline-view-title",children:"Afficher Line T\xe9l\xe9phonique"}),Object(d.jsx)("div",{className:"telephoneline-view-selected-filters-container",children:Object.keys(j).map((e=>j[e].map(((t,n)=>Object(d.jsxs)("span",{className:"telephoneline-view-filter-chip",children:["".concat(e,": ").concat(t)," ",Object(d.jsx)("button",{onClick:()=>((e,t)=>{h((n=>{const a={...n};return a[e]=a[e].filter((e=>e!==t)),0===a[e].length&&delete a[e],a}))})(e,t),children:"x"})]},"".concat(e,"-").concat(n))))))}),l.length>0&&Object(d.jsx)(m,{columns:l,data:n}),Object(d.jsx)("div",{className:"telephoneline-view-footer",children:Object(d.jsx)("button",{className:"telephoneline-view-export-button",onClick:()=>(e=>{const t=Me.b.json_to_sheet(e),n=Me.b.book_new();Me.b.book_append_sheet(n,t,"TelephoneLines"),Me.c(n,"TelephoneLines.xlsx")})(n),children:"Export to Excel"})})]})};n(148);const xt=()=>{const{user:e,loading:t}=p(),n=Object(o.h)(),a=!["/","/signup","/login"].includes(n.pathname);if(t)return Object(d.jsx)("div",{children:"Loading..."});if(!e&&"/login"!==n.pathname&&"/signup"!==n.pathname&&"/"!==n.pathname)return Object(d.jsx)(o.a,{to:"/login"});return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(Te,{}),Object(d.jsxs)("div",{className:"main-content ".concat(a?"with-sidebar":""),children:[a&&Object(d.jsx)(qe,{}),Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{path:"/",exact:!0,component:j}),Object(d.jsx)(o.b,{path:"/login",component:je}),Object(d.jsx)(o.b,{path:"/signup",component:ke}),Object(d.jsx)(o.b,{path:"/dashboard",render:()=>{switch(null===e||void 0===e?void 0:e.role){case"admin":return Object(d.jsx)(Pe,{});case"consultant":return Object(d.jsx)(Ae,{});default:return Object(d.jsx)(o.a,{to:"/login"})}}}),Object(d.jsx)(o.b,{path:"/it-equipment",exact:!0,component:Le}),Object(d.jsx)(o.b,{path:"/it-equipment-manager",component:Qe}),Object(d.jsx)(o.b,{path:"/it-equipment-view",component:Ye}),Object(d.jsx)(o.b,{path:"/telecom-packs",exact:!0,component:st}),Object(d.jsx)(o.b,{path:"/telecom-pack-manager",component:lt}),Object(d.jsx)(o.b,{path:"/telecom-pack-view",component:ot}),Object(d.jsx)(o.b,{path:"/telephone-lines",exact:!0,component:pt}),Object(d.jsx)(o.b,{path:"/telephone-line-manager",component:ut}),Object(d.jsx)(o.b,{path:"/telephone-line-view",component:Ot}),Object(d.jsx)(o.b,{path:"/edit-excel",component:Re}),Object(d.jsx)(o.b,{path:"*",children:e?Object(d.jsx)(o.a,{to:"/dashboard"}):Object(d.jsx)(o.a,{to:"/login"})})]})]})]})};var gt=()=>Object(d.jsx)(u,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(xt,{})})});n(149);s.a.render(Object(d.jsx)(i.a,{children:Object(d.jsx)(gt,{})}),document.getElementById("root"))},67:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.251e2a0c.chunk.js.map